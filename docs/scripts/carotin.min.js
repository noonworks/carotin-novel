!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=30)}([function(t,e,n){var i=n(21),o=[n(23),n(24),n(25),n(26)];t.exports=i.createStore(o,[])},function(t,e,n){(function(e){var n=Object.assign?Object.assign:function(t,e,n,i){for(var o=1;o<arguments.length;o++)a(Object(arguments[o]),function(e,n){t[n]=e});return t},i=function(){if(Object.create)return function(t,e,i,o){var r=s(arguments,1);return n.apply(this,[Object.create(t)].concat(r))};{function t(){}return function(e,i,o,r){var a=s(arguments,1);return t.prototype=e,n.apply(this,[new t].concat(a))}}}(),o=String.prototype.trim?function(t){return String.prototype.trim.call(t)}:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},r="undefined"!=typeof window?window:e;function s(t,e){return Array.prototype.slice.call(t,e||0)}function a(t,e){c(t,function(t,n){return e(t,n),!1})}function c(t,e){if(u(t)){for(var n=0;n<t.length;n++)if(e(t[n],n))return t[n]}else for(var i in t)if(t.hasOwnProperty(i)&&e(t[i],i))return t[i]}function u(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}t.exports={assign:n,create:i,trim:o,bind:function(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,0))}},slice:s,each:a,map:function(t,e){var n=u(t)?[]:{};return c(t,function(t,i){return n[i]=e(t,i),!1}),n},pluck:c,isList:u,isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)},isObject:function(t){return t&&"[object Object]"==={}.toString.call(t)},Global:r}}).call(this,n(22))},function(t,e,n){"use strict";var i=n(3),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),r=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,c=a&&function(){var t={};try{for(var e in a(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),u=function(t,e,n,i){var o;e in t&&("function"!=typeof(o=i)||"[object Function]"!==r.call(o)||!i())||(c?a(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},l=function(t,e){var n=arguments.length>2?arguments[2]:{},r=i(e);o&&(r=s.call(r,Object.getOwnPropertySymbols(e)));for(var a=0;a<r.length;a+=1)u(t,r[a],e[r[a]],n[r[a]])};l.supportsDescriptors=!!c,t.exports=l},function(t,e,n){"use strict";var i=Array.prototype.slice,o=n(4),r=Object.keys,s=r?function(t){return r(t)}:n(11),a=Object.keys;s.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return o(t)?a(i.call(t)):a(t)}):Object.keys=s;return Object.keys||s},t.exports=s},function(t,e,n){"use strict";var i=Object.prototype.toString;t.exports=function(t){var e=i.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),n}},function(t,e,n){"use strict";var i=Object,o=TypeError;t.exports=function(){if(null!=this&&this!==i(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}},function(t,e,n){"use strict";var i=n(5),o=n(2).supportsDescriptors,r=Object.getOwnPropertyDescriptor,s=TypeError;t.exports=function(){if(!o)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=r(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return i}},function(t,e,n){window,t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i,o=function(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},r=function(t){return t*(Math.PI/180)},s=function(t,e,n){for(var i,o=e.split(/[ ,]+/g),r=0;r<o.length;r+=1)i=o[r],t.addEventListener?t.addEventListener(i,n,!1):t.attachEvent&&t.attachEvent(i,n)},a=function(t,e,n){for(var i,o=e.split(/[ ,]+/g),r=0;r<o.length;r+=1)i=o[r],t.removeEventListener?t.removeEventListener(i,n):t.detachEvent&&t.detachEvent(i,n)},c=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},u=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},l=function(t,e){e.top||e.right||e.bottom||e.left?(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left):(t.style.left=e.x+"px",t.style.top=e.y+"px")},p=function(t,e,n){var i=d(t);for(var o in i)if(i.hasOwnProperty(o))if("string"==typeof e)i[o]=e+" "+n;else{for(var r="",s=0,a=e.length;s<a;s+=1)r+=e[s]+" "+n+", ";i[o]=r.slice(0,-2)}return i},d=function(t){var e={};return e[t]="",["webkit","Moz","o"].forEach(function(n){e[n+t.charAt(0).toUpperCase()+t.slice(1)]=""}),e},f=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},h=function(t,e){if(t.length)for(var n=0,i=t.length;n<i;n+=1)e(t[n]);else e(t)},m=!!("ontouchstart"in window),y=!!window.PointerEvent,g=!!window.MSPointerEvent,v={start:"mousedown",move:"mousemove",end:"mouseup"},b={};function w(){}y?i={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:g?i={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:m?(i={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},b=v):i=v,w.prototype.on=function(t,e){var n,i=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var o=0;o<i.length;o+=1)n=i[o],this._handlers_[n]=this._handlers_[n]||[],this._handlers_[n].push(e);return this},w.prototype.off=function(t,e){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===e?this._handlers_[t]=null:this._handlers_[t]&&this._handlers_[t].indexOf(e)>=0&&this._handlers_[t].splice(this._handlers_[t].indexOf(e),1),this},w.prototype.trigger=function(t,e){var n,i=this,o=t.split(/[ ,]+/g);i._handlers_=i._handlers_||{};for(var r=0;r<o.length;r+=1)n=o[r],i._handlers_[n]&&i._handlers_[n].length&&i._handlers_[n].forEach(function(t){t.call(i,{type:n,target:i},e)})},w.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,e){var n={};for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)?n[i]=e[i]:t.hasOwnProperty(i)&&(n[i]=t[i]);return n}(this.options,t))},w.prototype.bindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[e]=function(){"function"==typeof n["on"+e]?n["on"+e].apply(n,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},s(t,i[e],n._domHandlers_[e]),b[e]&&s(t,b[e],n._domHandlers_[e]),n},w.prototype.unbindEvt=function(t,e){return this._domHandlers_=this._domHandlers_||{},a(t,i[e],this._domHandlers_[e]),b[e]&&a(t,b[e],this._domHandlers_[e]),delete this._domHandlers_[e],this};var O=w;function x(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1},this.config(e),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=x.id,x.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}x.prototype=new O,x.constructor=x,x.id=0,x.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},x.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=function(t,e){var n=d("borderRadius");for(var i in n)n.hasOwnProperty(i)&&(n[i]="50%");return n}(),n=p("transition","opacity",t),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},f(i.el,n),f(i.back,e),f(i.front,e),this.applyStyles(i),this},x.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var n in t[e])this.ui[e].style[n]=t[e][n];return this},x.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},x.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},x.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},x.prototype.show=function(t){var e=this;return e.options.dataOnly?e:(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),"function"==typeof t&&t.call(this)},e.options.fadeTime),e)},x.prototype.hide=function(t){var e=this;return e.options.dataOnly?e:(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var n="dynamic"===e.options.mode?"none":"block";e.ui.el.style.display=n,"function"==typeof t&&t.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick&&e.restPosition(),e)},x.prototype.restPosition=function(t){var e=this;e.frontPosition={x:0,y:0};var n=e.options.fadeTime+"ms",i={};i.front=p("transition",["top","left"],n);var o={front:{}};o.front={left:e.frontPosition.x+"px",top:e.frontPosition.y+"px"},e.applyStyles(i),e.applyStyles(o),e.restTimeout=setTimeout(function(){"function"==typeof t&&t.call(e),e.restCallback()},e.options.fadeTime)},x.prototype.restCallback=function(){var t={};t.front=p("transition","none",""),this.applyStyles(t),this.trigger("rested",this.instance)},x.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},x.prototype.computeDirection=function(t){var e,n,i,o=t.angle.radian,r=Math.PI/4,s=Math.PI/2;if(o>r&&o<3*r&&!t.lockX?e="up":o>-r&&o<=r&&!t.lockY?e="left":o>3*-r&&o<=-r&&!t.lockX?e="down":t.lockY||(e="right"),t.lockY||(n=o>-s&&o<s?"left":"right"),t.lockX||(i=o>0?"up":"down"),t.force>this.options.threshold){var a,c={};for(a in this.direction)this.direction.hasOwnProperty(a)&&(c[a]=this.direction[a]);var u={};for(a in this.direction={x:n,y:i,angle:e},t.direction=this.direction,c)c[a]===this.direction[a]&&(u[a]=!0);if(u.x&&u.y&&u.angle)return t;u.x&&u.y||this.trigger("plain",t),u.x||this.trigger("plain:"+n,t),u.y||this.trigger("plain:"+i,t),u.angle||this.trigger("dir dir:"+e,t)}else this.resetDirection();return t};var S=x;function _(t,e){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=_.id,_.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1},this.config(e),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}_.prototype=new O,_.constructor=_,_.id=0,_.prototype.prepareNipples=function(){var t=this.nipples;t.on=this.on.bind(this),t.off=this.off.bind(this),t.options=this.options,t.destroy=this.destroy.bind(this),t.ids=this.ids,t.id=this.id,t.processOnMove=this.processOnMove.bind(this),t.processOnEnd=this.processOnEnd.bind(this),t.get=function(e){if(void 0===e)return t[0];for(var n=0,i=t.length;n<i;n+=1)if(t[n].identifier===e)return t[n];return!1}},_.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},_.prototype.begin=function(){var t=this.options;if("static"===t.mode){var e=this.createNipple(t.position,this.manager.getIdentifier());e.add(),this.idles.push(e)}},_.prototype.createNipple=function(t,e){var n=u(),i={},o=this.options;if(t.x&&t.y)i={x:t.x-(n.x+this.box.left),y:t.y-(n.y+this.box.top)};else if(t.top||t.right||t.bottom||t.left){var r=document.createElement("DIV");r.style.display="hidden",r.style.top=t.top,r.style.right=t.right,r.style.bottom=t.bottom,r.style.left=t.left,r.style.position="absolute",o.zone.appendChild(r);var s=r.getBoundingClientRect();o.zone.removeChild(r),i=t,t={x:s.left+n.x,y:s.top+n.y}}var a=new S(this,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:e,position:t,zone:o.zone,frontPosition:{x:0,y:0}});return o.dataOnly||(l(a.ui.el,i),l(a.ui.front,a.frontPosition)),this.nipples.push(a),this.trigger("added "+a.identifier+":added",a),this.manager.trigger("added "+a.identifier+":added",a),this.bindNipple(a),a},_.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},_.prototype.bindNipple=function(t){var e,n=this,i=function(t,i){e=t.type+" "+i.id+":"+t.type,n.trigger(e,i)};t.on("destroyed",n.onDestroyed.bind(n)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)},_.prototype.pressureFn=function(t,e,n){var i=this,o=0;clearInterval(i.pressureIntervals[n]),i.pressureIntervals[n]=setInterval(function(){var n=t.force||t.pressure||t.webkitForce||0;n!==o&&(e.trigger("pressure",n),i.trigger("pressure "+e.identifier+":pressure",n),o=n)}.bind(i),100)},_.prototype.onstart=function(t){var e=this,n=e.options,i=t;return t=c(t),e.updateBox(),h(t,function(o){e.actives.length<n.maxNumberOfNipples?e.processOnStart(o):i.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach(function(n){if(Object.values(i.touches).findIndex(function(t){return t.identifier===n})<0){var o=[t[0]];o.identifier=n,e.processOnEnd(o)}}),e.actives.length<n.maxNumberOfNipples&&e.processOnStart(o))}),e.manager.bindDocument(),!1},_.prototype.processOnStart=function(t){var e,n=this,i=n.options,r=n.manager.getIdentifier(t),s=t.force||t.pressure||t.webkitForce||0,a={x:t.pageX,y:t.pageY},c=n.getOrCreate(r,a);c.identifier!==r&&n.manager.removeIdentifier(c.identifier),c.identifier=r;var u=function(e){e.trigger("start",e),n.trigger("start "+e.id+":start",e),e.show(),s>0&&n.pressureFn(t,e,e.identifier),n.processOnMove(t)};if((e=n.idles.indexOf(c))>=0&&n.idles.splice(e,1),n.actives.push(c),n.ids.push(c.identifier),"semi"!==i.mode)u(c);else{if(!(o(a,c.position)<=i.catchDistance))return c.destroy(),void n.processOnStart(t);u(c)}return c},_.prototype.getOrCreate=function(t,e){var n,i=this.options;return/(semi|static)/.test(i.mode)?(n=this.idles[0])?(this.idles.splice(0,1),n):"semi"===i.mode?this.createNipple(e,t):(console.warn("Coudln't find the needed nipple."),!1):n=this.createNipple(e,t)},_.prototype.processOnMove=function(t){var e=this.options,n=this.manager.getIdentifier(t),i=this.nipples.get(n);if(function(t){return isNaN(t.buttons)?0!==t.pressure:0!==t.buttons}(t)){if(!i)return console.error("Found zombie joystick with ID "+n),void this.manager.removeIdentifier(n);i.identifier=n;var s=i.options.size/2,a={x:t.pageX,y:t.pageY};e.lockX&&(a.y=i.position.y),e.lockY&&(a.x=i.position.x);var c,u,p,d,f,h,m,y,g=o(a,i.position),v=(c=a,p=(u=i.position).x-c.x,d=u.y-c.y,function(t){return t*(180/Math.PI)}(Math.atan2(d,p))),b=r(v),w=g/s,O={distance:g,position:a};g>s&&(g=s,f=i.position,h=g,y={x:0,y:0},m=r(m=v),y.x=f.x-h*Math.cos(m),y.y=f.y-h*Math.sin(m),a=y);var x=a.x-i.position.x,S=a.y-i.position.y;i.frontPosition={x:x,y:S},e.dataOnly||l(i.ui.front,i.frontPosition);var _={identifier:i.identifier,position:a,force:w,pressure:t.force||t.pressure||t.webkitForce||0,distance:g,angle:{radian:b,degree:v},raw:O,instance:i,lockX:e.lockX,lockY:e.lockY};(_=i.computeDirection(_)).angle={radian:r(180-v),degree:180-v},i.trigger("move",_),this.trigger("move "+i.id+":move",_)}else this.processOnEnd(t)},_.prototype.processOnEnd=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),o=e.nipples.get(i),r=e.manager.removeIdentifier(o.identifier);o&&(n.dataOnly||o.hide(function(){"dynamic"===n.mode&&(o.trigger("removed",o),e.trigger("removed "+o.id+":removed",o),e.manager.trigger("removed "+o.id+":removed",o),o.destroy())}),clearInterval(e.pressureIntervals[o.identifier]),o.resetDirection(),o.trigger("end",o),e.trigger("end "+o.id+":end",o),e.ids.indexOf(o.identifier)>=0&&e.ids.splice(e.ids.indexOf(o.identifier),1),e.actives.indexOf(o)>=0&&e.actives.splice(e.actives.indexOf(o),1),/(semi|static)/.test(n.mode)?e.idles.push(o):e.nipples.indexOf(o)>=0&&e.nipples.splice(e.nipples.indexOf(o),1),e.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(e.manager.ids[r.id]=r.identifier))},_.prototype.onDestroyed=function(t,e){this.nipples.indexOf(e)>=0&&this.nipples.splice(this.nipples.indexOf(e),1),this.actives.indexOf(e)>=0&&this.actives.splice(this.actives.indexOf(e),1),this.idles.indexOf(e)>=0&&this.idles.splice(this.idles.indexOf(e),1),this.ids.indexOf(e.identifier)>=0&&this.ids.splice(this.ids.indexOf(e.identifier),1),this.manager.removeIdentifier(e.identifier),this.manager.unbindDocument()},_.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(t){t.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var k=_;function E(t){var e,n=this;return n.ids={},n.index=0,n.collections=[],n.config(t),n.prepareCollections(),s(window,"resize",function(t){clearTimeout(e),e=setTimeout(function(){var t,e=u();n.collections.forEach(function(n){n.forEach(function(n){t=n.el.getBoundingClientRect(),n.position={x:e.x+t.left,y:e.y+t.top}})})},100)}),n.collections}E.prototype=new O,E.constructor=E,E.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var n;return t.collections.every(function(t){return!(n=t.get(e))}),n}},E.prototype.create=function(t){return this.createCollection(t)},E.prototype.createCollection=function(t){var e=new k(this,t);return this.bindCollection(e),this.collections.push(e),e},E.prototype.bindCollection=function(t){var e,n=this,i=function(t,i){e=t.type+" "+i.id+":"+t.type,n.trigger(e,i)};t.on("destroyed",n.onDestroyed.bind(n)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)},E.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},E.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},E.prototype.getIdentifier=function(t){var e;return t?void 0===(e=void 0===t.identifier?t.pointerId:t.identifier)&&(e=this.latest||0):e=this.index,void 0===this.ids[e]&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]},E.prototype.removeIdentifier=function(t){var e={};for(var n in this.ids)if(this.ids[n]===t){e.id=n,e.identifier=this.ids[n],delete this.ids[n];break}return e},E.prototype.onmove=function(t){return this.onAny("move",t),!1},E.prototype.onend=function(t){return this.onAny("end",t),!1},E.prototype.oncancel=function(t){return this.onAny("end",t),!1},E.prototype.onAny=function(t,e){var n,i=this,o="processOn"+t.charAt(0).toUpperCase()+t.slice(1);return e=c(e),h(e,function(t){n=i.getIdentifier(t),h(i.collections,function(t,e,n){n.ids.indexOf(e)>=0&&(n[o](t),t._found_=!0)}.bind(null,t,n)),t._found_||i.removeIdentifier(n)}),!1},E.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(t){t.destroy()}),this.off()},E.prototype.onDestroyed=function(t,e){if(this.collections.indexOf(e)<0)return!1;this.collections.splice(this.collections.indexOf(e),1)};var j=new E;e.default={create:function(t){return j.create(t)},factory:j}}]).default},function(t,e,n){var i=n(3),o=n(12),r=n(13),s=n(14),a=n(18),c=n(20),u=Date.prototype.getTime;function l(t,e,n){var f=n||{};return!(f.strict?!r(t,e):t!==e)||(!t||!e||"object"!=typeof t&&"object"!=typeof e?f.strict?r(t,e):t==e:function(t,e,n){var r,f;if(typeof t!=typeof e)return!1;if(p(t)||p(e))return!1;if(t.prototype!==e.prototype)return!1;if(o(t)!==o(e))return!1;var h=s(t),m=s(e);if(h!==m)return!1;if(h||m)return t.source===e.source&&a(t)===a(e);if(c(t)&&c(e))return u.call(t)===u.call(e);var y=d(t),g=d(e);if(y!==g)return!1;if(y||g){if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}if(typeof t!=typeof e)return!1;try{var v=i(t),b=i(e)}catch(t){return!1}if(v.length!==b.length)return!1;for(v.sort(),b.sort(),r=v.length-1;r>=0;r--)if(v[r]!=b[r])return!1;for(r=v.length-1;r>=0;r--)if(f=v[r],!l(t[f],e[f],n))return!1;return!0}(t,e,f))}function p(t){return null==t}function d(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}t.exports=l},function(t,e,n){"use strict";var i=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===o}(t)}(t)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(t,e){return!1!==e.clone&&e.isMergeableObject(t)?u((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function s(t,e,n){return t.concat(e).map(function(t){return r(t,n)})}function a(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return t.propertyIsEnumerable(e)}):[]}(t))}function c(t,e,n){var i={};return n.isMergeableObject(t)&&a(t).forEach(function(e){i[e]=r(t[e],n)}),a(e).forEach(function(o){n.isMergeableObject(e[o])&&t[o]?i[o]=function(t,e){if(!e.customMerge)return u;var n=e.customMerge(t);return"function"==typeof n?n:u}(o,n)(t[o],e[o],n):i[o]=r(e[o],n)}),i}function u(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||s,n.isMergeableObject=n.isMergeableObject||i;var o=Array.isArray(e);return o===Array.isArray(t)?o?n.arrayMerge(t,e,n):c(t,e,n):r(e,n)}u.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(t,n){return u(t,n,e)},{})};var l=u;t.exports=l},function(t,e){t.exports=function(){var t={};return{defaults:function(e,n){t=n},get:function(e,n){var i=e();return void 0!==i?i:t[n]}}}},function(t,e,n){"use strict";var i;if(!Object.keys){var o=Object.prototype.hasOwnProperty,r=Object.prototype.toString,s=n(4),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),u=a.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(t){var e=t.constructor;return e&&e.prototype===t},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{p(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();i=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===r.call(t),i=s(t),a=e&&"[object String]"===r.call(t),d=[];if(!e&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var h=u&&n;if(a&&t.length>0&&!o.call(t,0))for(var m=0;m<t.length;++m)d.push(String(m));if(i&&t.length>0)for(var y=0;y<t.length;++y)d.push(String(y));else for(var g in t)h&&"prototype"===g||!o.call(t,g)||d.push(String(g));if(c)for(var v=function(t){if("undefined"==typeof window||!f)return p(t);try{return p(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)v&&"constructor"===l[b]||!o.call(t,l[b])||d.push(l[b]);return d}}t.exports=i},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,o=Object.prototype.toString,r=function(t){return!(i&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===o.call(t)},s=function(t){return!!r(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==o.call(t)&&"[object Function]"===o.call(t.callee)},a=function(){return r(arguments)}();r.isLegacyArguments=s,t.exports=a?r:s},function(t,e,n){"use strict";var i=function(t){return t!=t};t.exports=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!i(t)||!i(e))}},function(t,e,n){"use strict";var i=n(15),o=RegExp.prototype.exec,r=Object.getOwnPropertyDescriptor,s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!a)return"[object RegExp]"===s.call(t);var e=r(t,"lastIndex");return!(!e||!i(e,"value"))&&function(t){try{var e=t.lastIndex;return t.lastIndex=0,o.call(t),!0}catch(t){return!1}finally{t.lastIndex=e}}(t)}},function(t,e,n){"use strict";var i=n(16);t.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";var i=n(17);t.exports=Function.prototype.bind||i},function(t,e,n){"use strict";var i="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,r=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==r.call(e))throw new TypeError(i+e);for(var n,s=o.call(arguments,1),a=function(){if(this instanceof n){var i=e.apply(this,s.concat(o.call(arguments)));return Object(i)===i?i:this}return e.apply(t,s.concat(o.call(arguments)))},c=Math.max(0,e.length-s.length),u=[],l=0;l<c;l++)u.push("$"+l);if(n=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(a),e.prototype){var p=function(){};p.prototype=e.prototype,n.prototype=new p,p.prototype=null}return n}},function(t,e,n){"use strict";var i=n(2),o=n(5),r=n(6),s=n(19),a=Function.call.bind(o);i(a,{getPolyfill:r,implementation:o,shim:s}),t.exports=a},function(t,e,n){"use strict";var i=n(2).supportsDescriptors,o=n(6),r=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,c=Object.getPrototypeOf,u=/a/;t.exports=function(){if(!i||!c)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=o(),e=c(u),n=r(e,"flags");return n&&n.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},function(t,e,n){"use strict";var i=Date.prototype.getDay,o=Object.prototype.toString,r="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(r?function(t){try{return i.call(t),!0}catch(t){return!1}}(t):"[object Date]"===o.call(t))}},function(t,e,n){var i=n(1),o=i.slice,r=i.pluck,s=i.each,a=i.bind,c=i.create,u=i.isList,l=i.isFunction,p=i.isObject;t.exports={createStore:f};var d={version:"2.0.12",enabled:!1,get:function(t,e){var n=this.storage.read(this._namespacePrefix+t);return this._deserialize(n,e)},set:function(t,e){return void 0===e?this.remove(t):(this.storage.write(this._namespacePrefix+t,this._serialize(e)),e)},remove:function(t){this.storage.remove(this._namespacePrefix+t)},each:function(t){var e=this;this.storage.each(function(n,i){t.call(e,e._deserialize(n),(i||"").replace(e._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(t){return this._namespacePrefix=="__storejs_"+t+"_"},createStore:function(){return f.apply(this,arguments)},addPlugin:function(t){this._addPlugin(t)},namespace:function(t){return f(this.storage,this.plugins,t)}};function f(t,e,n){n||(n=""),t&&!u(t)&&(t=[t]),e&&!u(e)&&(e=[e]);var i=n?"__storejs_"+n+"_":"",f=n?new RegExp("^"+i):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var h=c({_namespacePrefix:i,_namespaceRegexp:f,_testStorage:function(t){try{var e="__storejs__test__";t.write(e,e);var n=t.read(e)===e;return t.remove(e),n}catch(t){return!1}},_assignPluginFnProp:function(t,e){var n=this[e];this[e]=function(){var e=o(arguments,0),i=this;function r(){if(n)return s(arguments,function(t,n){e[n]=t}),n.apply(i,e)}var a=[r].concat(e);return t.apply(i,a)}},_serialize:function(t){return JSON.stringify(t)},_deserialize:function(t,e){if(!t)return e;var n="";try{n=JSON.parse(t)}catch(e){n=t}return void 0!==n?n:e},_addStorage:function(t){this.enabled||this._testStorage(t)&&(this.storage=t,this.enabled=!0)},_addPlugin:function(t){var e=this;if(u(t))s(t,function(t){e._addPlugin(t)});else if(!r(this.plugins,function(e){return t===e})){if(this.plugins.push(t),!l(t))throw new Error("Plugins must be function values that return objects");var n=t.call(this);if(!p(n))throw new Error("Plugins must return an object of function properties");s(n,function(n,i){if(!l(n))throw new Error("Bad plugin property: "+i+" from plugin "+t.name+". Plugins should only return functions.");e._assignPluginFnProp(n,i)})}},addStorage:function(t){!function(){var t="undefined"==typeof console?null:console;t&&(t.warn?t.warn:t.log).apply(t,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(t)}},d,{plugins:[]});return h.raw={},s(h,function(t,e){l(t)&&(h.raw[e]=a(h,t))}),s(t,function(t){h._addStorage(t)}),s(e,function(t){h._addPlugin(t)}),h}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(1).Global;function o(){return i.localStorage}function r(t){return o().getItem(t)}t.exports={name:"localStorage",read:r,write:function(t,e){return o().setItem(t,e)},each:function(t){for(var e=o().length-1;e>=0;e--){var n=o().key(e);t(r(n),n)}},remove:function(t){return o().removeItem(t)},clearAll:function(){return o().clear()}}},function(t,e,n){var i=n(1).Global;function o(){return i.sessionStorage}function r(t){return o().getItem(t)}t.exports={name:"sessionStorage",read:r,write:function(t,e){return o().setItem(t,e)},each:function(t){for(var e=o().length-1;e>=0;e--){var n=o().key(e);t(r(n),n)}},remove:function(t){return o().removeItem(t)},clearAll:function(){return o().clear()}}},function(t,e,n){var i=n(1),o=i.Global,r=i.trim;t.exports={name:"cookieStorage",read:function(t){if(!t||!u(t))return null;var e="(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(s.cookie.replace(new RegExp(e),"$1"))},write:function(t,e){if(!t)return;s.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:a,remove:c,clearAll:function(){a(function(t,e){c(e)})}};var s=o.document;function a(t){for(var e=s.cookie.split(/; ?/g),n=e.length-1;n>=0;n--)if(r(e[n])){var i=e[n].split("="),o=unescape(i[0]);t(unescape(i[1]),o)}}function c(t){t&&u(t)&&(s.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function u(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(s.cookie)}},function(t,e){t.exports={name:"memoryStorage",read:function(t){return n[t]},write:function(t,e){n[t]=e},each:function(t){for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)},remove:function(t){delete n[t]},clearAll:function(t){n={}}};var n={}},,,,function(t,e,n){"use strict";n.r(e);var i=function(){function t(t){this._dom=t,this.setScrollEvent()}return Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this._dom.scrollLeft},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dom",{get:function(){return this._dom},enumerable:!0,configurable:!0}),t.prototype.scrollToLeft=function(t,e){this.scrollTo(this._dom.scrollLeft+t,e)},t.prototype.scrollTo=function(t,e){this._dom.scrollTo?this._dom.scrollTo({left:t,behavior:e?"smooth":"auto"}):this._dom.scrollLeft=t},t.prototype.setScrollEvent=function(){var t=this;this._dom.addEventListener("wheel",function(e){0==e.deltaX&&(e.stopPropagation(),e.preventDefault(),t.scrollToLeft(-1*e.deltaY,!1))},{passive:!1})},t}(),o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("width","44"),o.setAttribute("height","44"),o.setAttribute("viewBox","0 0 44 44"),o.setAttribute("xmlns","http://www.w3.org/2000/svg");var r=document.createElementNS("http://www.w3.org/2000/svg","g");r.setAttribute("fill","none"),r.setAttribute("fill-rule","evenodd"),r.setAttribute("stroke-width","2");var s=document.createElementNS("http://www.w3.org/2000/svg","circle");s.setAttribute("cx","22"),s.setAttribute("cy","22"),s.setAttribute("r","1.0");var a=document.createElementNS("http://www.w3.org/2000/svg","animate");a.setAttribute("attributeName","r"),a.setAttribute("begin","0s"),a.setAttribute("dur","1.8s"),a.setAttribute("values","1; 20"),a.setAttribute("calcMode","spline"),a.setAttribute("keyTimes","0; 1"),a.setAttribute("keySplines","0.165, 0.84, 0.44, 1"),a.setAttribute("repeatCount","indefinite");var c=document.createElementNS("http://www.w3.org/2000/svg","animate");c.setAttribute("attributeName","stroke-opacity"),c.setAttribute("begin","0s"),c.setAttribute("dur","1.8s"),c.setAttribute("values","1; 0"),c.setAttribute("calcMode","spline"),c.setAttribute("keyTimes","0; 1"),c.setAttribute("keySplines","0.3, 0.61, 0.355, 1"),c.setAttribute("repeatCount","indefinite"),s.appendChild(a),s.appendChild(c);var u=document.createElementNS("http://www.w3.org/2000/svg","circle");u.setAttribute("cx","22"),u.setAttribute("cy","22"),u.setAttribute("r","1.0");var l=document.createElementNS("http://www.w3.org/2000/svg","animate");l.setAttribute("attributeName","r"),l.setAttribute("begin","-0.9s"),l.setAttribute("dur","1.8s"),l.setAttribute("values","1; 20"),l.setAttribute("calcMode","spline"),l.setAttribute("keyTimes","0; 1"),l.setAttribute("keySplines","0.165, 0.84, 0.44, 1"),l.setAttribute("repeatCount","indefinite");var p=document.createElementNS("http://www.w3.org/2000/svg","animate");p.setAttribute("attributeName","stroke-opacity"),p.setAttribute("begin","-0.9s"),p.setAttribute("dur","1.8s"),p.setAttribute("values","1; 0"),p.setAttribute("calcMode","spline"),p.setAttribute("keyTimes","0; 1"),p.setAttribute("keySplines","0.3, 0.61, 0.355, 1"),p.setAttribute("repeatCount","indefinite"),u.appendChild(l),u.appendChild(p),r.appendChild(s),r.appendChild(u),o.appendChild(r);var d=function(){function t(t){this.wrapper=t,this.svgelements={circle:o}}return t.prototype.set=function(t){var e=this;this.wrapper.querySelectorAll("svg").forEach(function(t){e.wrapper.removeChild(t)}),this.wrapper.appendChild(this.svgelements[t])},t.prototype.show=function(){this.wrapper.classList.remove("off")},t.prototype.hide=function(){this.wrapper.classList.contains("off")||this.wrapper.classList.add("off")},t}(),f=function(){function t(t){this.animationId=-1,this.previousSpeed=0,this.speed=0,this.scrollStartPos=0,this.scrollStartDt=-1,this.wrapper=t}return t.prototype.start=function(){var t=this;window.cancelAnimationFrame(this.animationId),this.scrollStartPos=this.wrapper.scrollLeft,this.scrollStartDt=(new Date).getTime();var e=function(){t.draw(),t.animationId=window.requestAnimationFrame(e)};this.animationId=window.requestAnimationFrame(e)},t.prototype.stop=function(){window.cancelAnimationFrame(this.animationId),this.animationId=-1,this.resetSpeed(),this.scrollStartPos=0,this.scrollStartDt=-1},t.prototype.setSpeed=function(t,e){if(t&&t.direction&&t.distance){var n="up"==t.direction.y?1:-1,i=t.distance/e,o=Math.pow(i,2)*n;this.previousSpeed!=o&&(this.previousSpeed=this.speed,this.speed=o,this.start())}else this.resetSpeed()},t.prototype.resetSpeed=function(){this.previousSpeed=0,this.speed=0},t.prototype.draw=function(){if(!(this.scrollStartDt<0)){var t=(new Date).getTime()-this.scrollStartDt,e=this.scrollStartPos+this.speed*t;this.wrapper.scrollTo(e,!1)}},t}(),h=n(7),m=n.n(h);function y(t){var e;return(e=t.key,document.documentElement.style.getPropertyValue(e)!=t.val)&&(document.documentElement.style.setProperty(t.key,t.val),!0)}var g="--slide-pad-position-";var v,b=function(){function t(t,e){this.joystickManager=null,this.size="middle",this.slidePadArea=t,this.scrollManager=new f(e)}return t.prototype.move=function(t){var e=function(t){var e=[];for(var n in t){var i=t[n];i&&e.push({key:g+n,val:i})}return e}(t);0!=e.length&&e.forEach(function(t){y(t)})},t.prototype.changeSize=function(t){this.size!=t&&(this.hide(),document.documentElement.setAttribute("data-slide-pad-size",t),this.show())},t.prototype.show=function(){this.joystickManager||this.add(this.slidePadArea.scrollWidth),this.slidePadArea.classList.remove("hidden")},t.prototype.hide=function(){this.joystickManager&&(this.joystickManager.destroy(),this.joystickManager=null),this.slidePadArea.classList.add("hidden")},t.prototype.add=function(t){var e=this;this.joystickManager=m.a.create({zone:this.slidePadArea,color:"white",size:2*t,position:{left:"50%",top:"50%"},mode:"static",lockY:!0,restOpacity:.8}),this.joystickManager.on("move",function(n,i){e.scrollManager.setSpeed(i,t)}),this.joystickManager.on("start",function(){e.scrollManager.start()}),this.joystickManager.on("end",function(){e.scrollManager.stop()})},t}(),w="carotin_novel",O=n(8),x=n.n(O),S=n(9),_=n.n(S),k=n(0),E=n.n(k),j=n(10),A=n.n(j);E.a.addPlugin(A.a);var P=((v={})[w]={version:"0.0.1",config:{update:(new Date).getTime()},works:{}},v),T=new(function(){function t(){this.emptyInStorage=!1,this.saveQueueId=-1,this.cache=this.load()}return t.prototype.getWork=function(t){return Object.hasOwnProperty.call(this.cache.works,t)?this.cache.works[t]:null},t.prototype.update=function(t){var e=_()(this.cache,t);x()(this.cache,e)||this.save(e)},t.prototype.save=function(t){var e=this;this.cache=t,window.clearTimeout(this.saveQueueId),this.saveQueueId=window.setTimeout(function(){E.a.set(w,e.cache)},100)},t.prototype.load=function(){var t=E.a.get(w);return t||(this.emptyInStorage=!0,E.a.defaults(P),t=E.a.get(w)),t},t}()),D=function(){function t(t){this.articleId="",this.animationId=-1,this.saveQueueId=-1,this.prevState=null,this.wrapper=t,this.articleId=this.getArticleId(t.dom)}return t.prototype.start=function(){var t=this;window.cancelAnimationFrame(this.animationId);var e=function(){t.autoSave(),t.animationId=window.requestAnimationFrame(e)};this.animationId=window.requestAnimationFrame(e)},t.prototype.autoSave=function(){this.save(!0)},t.prototype.bookmark=function(){this.save(!1)},t.prototype.restore=function(){var t=T.getWork(this.articleId);return null!=t?this.doRestore(t):new Promise(function(t){t()})},t.prototype.doRestore=function(t){var e=this;return new Promise(function(n,i){var o=t.autosave||t.bookmark;o?e.moveToBookmark(o).then(n).catch(i):n()})},t.prototype.moveToBookmark=function(t){for(var e=this,n=Array.from(this.wrapper.dom.querySelectorAll("div.page")),i=null,o=0;o<n.length;o++)if(n[o].getAttribute("data-page-id")==t.page){i=n[o];break}if(!i)return new Promise(function(t,e){e(new Error("Page not found."))});var r=Math.round(i.scrollWidth*t.scrolldepth);return new Promise(function(t){i&&(i.scrollIntoView(),i.offsetLeft),setTimeout(function(){e.wrapper.scrollToLeft(-1*r,!1),t()},300)})},t.prototype.getArticleId=function(t){var e=t.getAttribute("data-article-id");return e||location.pathname},t.prototype.save=function(t){var e,n=this.getState();if(null!=n.page&&null!=n.scrolldepth)if(null!=this.prevState){if(!this.isSame(this.prevState,n)){this.prevState=n;var i={works:(e={},e[this.articleId]={autosave:{},bookmark:{}},e)};t?i.works[this.articleId].autosave=n:i.works[this.articleId].bookmark=n,window.clearTimeout(this.saveQueueId),this.saveQueueId=window.setTimeout(function(){T.update(i)},500)}}else this.prevState=n},t.prototype.isSame=function(t,e){return t.page==e.page&&t.scrolldepth==e.scrolldepth},t.prototype.getRightTopElement=function(){for(var t=document.elementFromPoint(window.innerWidth-40,0);t&&t.parentElement;){if("div"==t.tagName.toLowerCase()&&t.classList.contains("page"))return t;t=t.parentElement}return null},t.prototype.getState=function(){var t={page:"",scrolldepth:0,update:(new Date).getTime()},e=this.getRightTopElement();if(e){t.page=e.getAttribute("data-page-id")||"";var n=e.getBoundingClientRect().right-window.innerWidth;t.scrolldepth=n/e.scrollWidth}return t},t}(),I=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},C=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(I(arguments[e]));return t};var M={className:"page",icon:"ion-md-bookmarks",title:"ページ"},N={className:"share",icon:"ion-md-share",title:"シェア"},L=[{className:"settings",icon:"ion-md-settings",title:"設定"},{className:"help",icon:"ion-md-help-circle",title:"ヘルプ"},{className:"close",icon:"ion-md-close-circle",title:"閉じる"}],z=function(){function t(t){var e,n,i,o;n=document.head.querySelectorAll("link"),i=!1,o=!1,n.forEach(function(t){"stylesheet"==t.rel.toLowerCase()&&(t.href.indexOf("ionicons")>=0&&(i=!0),t.href.indexOf("fonts.googleapis.com")>=0&&t.href.indexOf("Noto+Serif+JP")>=0&&(o=!0))}),i||((e=document.createElement("link")).rel="stylesheet",e.href="https://unpkg.com/ionicons@4.5.10-0/dist/css/ionicons.min.css",document.head.appendChild(e)),o||((e=document.createElement("link")).rel="stylesheet",e.href="https://fonts.googleapis.com/css?family=Noto+Serif+JP&display=swap",document.head.appendChild(e)),this.menuRootDom=document.createElement("div"),this.menuRootDom.classList.add("menu"),this.menuRootDom.appendChild(function(){var t=document.createElement("div");t.classList.add("menu-back");var e=document.createElement("div");e.classList.add("menu-slide");var n=document.createElement("i");return n.classList.add("icon"),n.classList.add("ion-ios-arrow-back"),e.appendChild(n),t.appendChild(e),t}()),this.menuContentWrapperDom=document.createElement("div"),this.menuContentWrapperDom.classList.add("menu-content-wrapper"),this.menuRootDom.appendChild(this.menuContentWrapperDom);var r=[];t.page.enable&&r.push(M),t.share.enable&&r.push(N),this.menuContentWrapperDom.appendChild(function(t){var e=document.createElement("div");e.classList.add("menu-content"),e.classList.add("menu-top");var n=document.createElement("h2"),i=document.createElement("span");i.classList.add("line");var o=document.createElement("span");o.classList.add("title"),o.textContent="MENU",n.appendChild(i),n.appendChild(o),n.appendChild(i.cloneNode()),e.appendChild(n);var r=document.createElement("ul");return t.forEach(function(t){var e=document.createElement("li");e.classList.add(t.className);var n=document.createElement("a");n.classList.add("button");var i=document.createElement("i");i.classList.add("icon"),i.classList.add(t.icon);var o=document.createElement("span");o.textContent=t.title,n.appendChild(i),n.appendChild(o),e.appendChild(n),r.appendChild(e)}),e.appendChild(r),e}(C(r,L)))}return Object.defineProperty(t.prototype,"dom",{get:function(){return this.menuRootDom},enumerable:!0,configurable:!0}),t}(),F=function(){function t(){var t=document.querySelector("div.carotin_novel");if(!t)throw new Error("Could not get elements.");this.rootDom=t;var e=t.querySelector("div.content_wrapper");if(!e)throw new Error("Could not get elements.");this.wrapperDom=e,this.wrapper=new i(this.wrapperDom);var n=this.rootDom.querySelector("div.bg_wrapper");n||((n=document.createElement("div")).classList.add("bg_wrapper"),this.rootDom.insertBefore(n,this.wrapperDom)),this.bgDom=n;var o=this.rootDom.querySelector("div.fg_wrapper");o||((o=document.createElement("div")).classList.add("fg_wrapper"),this.rootDom.insertBefore(o,this.wrapperDom)),this.fgDom=o;var r=this.rootDom.querySelector("div.slidepad");r||((r=document.createElement("div")).classList.add("slidepad"),this.rootDom.appendChild(r)),this.slidepadDom=r,this.slidepad=new b(this.slidepadDom,this.wrapper),this.slidepad.show();var s=this.fgDom.querySelector("div.loader");s||((s=document.createElement("div")).classList.add("loader"),this.fgDom.appendChild(s)),this.loaderDom=s,this.loader=new d(this.loaderDom),this.scrollManager=new D(this.wrapper),this.menu=new z({page:{enable:!0},share:{enable:!0}}),this.rootDom.appendChild(this.menu.dom)}return t.prototype.start=function(){var t,e,n,i,o=this;this.loader.set("circle"),this.loader.show(),t=this.wrapperDom,e=/^\s*$/,t.querySelectorAll("ruby").forEach(function(t){t.childNodes.forEach(function(n){n.nodeType==Node.TEXT_NODE&&n.nodeValue&&e.test(n.nodeValue)&&t.removeChild(n)})}),n=this.rootDom,(i=(new UAParser).getResult())&&i.browser&&i.device&&i.browser.name&&"chrome"==i.browser.name.toLowerCase()&&"mobile"!=i.device.type&&n.classList.add("custom_ruby"),this.scrollManager.restore().then(function(){o.scrollManager.start(),o.loader.hide()}).catch(function(t){console.log(t),o.scrollManager.start(),o.loader.hide()})},t}();window.addEventListener("DOMContentLoaded",function(){(new F).start()})}]);